<HTML>
<HEAD>
   <TITLE> module decomp_2d_custom (generated by f90doc) </TITLE>
</HEAD>
<H1> Module decomp_2d_custom </H1>
<PRE>module decomp_2d_custom

        ! Uses
    use <A HREF="decomp_2d.html">decomp_2d</A>

        ! Variables
    integer, private :: <A HREF="decomp_2d_custom.html#var_level">level</A>
    integer, private, save, dimension(2,6) :: <A HREF="decomp_2d_custom.html#var_neighbour">neighbour</A>
    integer, public, save, dimension(2) :: <A HREF="decomp_2d_custom.html#var_dims">dims</A>
    integer, public, save, dimension(2) :: <A HREF="decomp_2d_custom.html#var_coord">coord</A>
    integer, public, allocatable, dimension(:) :: <A HREF="decomp_2d_custom.html#var_ranks_proc">ranks_proc</A>
    integer, public, save :: <A HREF="decomp_2d_custom.html#var_decomp_2d_layer_x">DECOMP_2D_LAYER_X</A>
    integer, public, save :: <A HREF="decomp_2d_custom.html#var_nrank_2d_layer_x">nrank_2d_layer_x</A>
    integer, public, allocatable, dimension(:,:) :: <A HREF="decomp_2d_custom.html#var_ranks_2d_layer_x">ranks_2d_layer_x</A>
    integer, public, save :: <A HREF="decomp_2d_custom.html#var_decomp_2d_vrtcl_x">DECOMP_2D_VRTCL_X</A>
    integer, public, save :: <A HREF="decomp_2d_custom.html#var_nrank_2d_vrtcl_x">nrank_2d_vrtcl_x</A>
    integer, public, allocatable, dimension(:,:) :: <A HREF="decomp_2d_custom.html#var_ranks_2d_vrtcl_x">ranks_2d_vrtcl_x</A>
    integer, public, allocatable, dimension(:,:,:) :: <A HREF="decomp_2d_custom.html#var_dcp_ph_sizes">dcp_ph_sizes</A>
    integer, public, allocatable, dimension(:,:,:) :: <A HREF="decomp_2d_custom.html#var_dcp_sp_sizes">dcp_sp_sizes</A>

        ! Interfaces
    public interface <A HREF="decomp_2d_custom.html#interface_alloc_x_ghost">alloc_x_ghost</A>
    public interface <A HREF="decomp_2d_custom.html#interface_alloc_y_ghost">alloc_y_ghost</A>
    public interface <A HREF="decomp_2d_custom.html#interface_update_ghost">update_ghost</A>

        ! Subroutines and functions
    public subroutine <A HREF="decomp_2d_custom.html#subroutine_decomp_info_ghost_init">decomp_info_ghost_init</A> (nx, ny, nz, ghost_cell, p_on_z, decomp, decomp_ghost)
    public subroutine <A HREF="decomp_2d_custom.html#subroutine_decomp_2d_partition_info">decomp_2d_partition_info</A> (ph)
    private subroutine <A HREF="decomp_2d_custom.html#subroutine_alloc_x_ghost_real">alloc_x_ghost_real</A> (var, decomp)
    private subroutine <A HREF="decomp_2d_custom.html#subroutine_alloc_y_ghost_real">alloc_y_ghost_real</A> (var, decomp)
    private subroutine <A HREF="decomp_2d_custom.html#subroutine_alloc_x_ghost_complex">alloc_x_ghost_complex</A> (var, decomp)
    private subroutine <A HREF="decomp_2d_custom.html#subroutine_alloc_y_ghost_complex">alloc_y_ghost_complex</A> (var, decomp)
    private subroutine <A HREF="decomp_2d_custom.html#subroutine_update_ghost_real">update_ghost_real</A> (inout, s1, s2, s3, dcp)
    private subroutine <A HREF="decomp_2d_custom.html#subroutine_update_ghost_complex">update_ghost_complex</A> (inout, s1, s2, s3, dcp)
    public subroutine <A HREF="decomp_2d_custom.html#subroutine_update_halo3">update_halo3</A> (in, out, level)
    private subroutine <A HREF="decomp_2d_custom.html#subroutine_init_neighbour">init_neighbour</A> ()
    private subroutine <A HREF="decomp_2d_custom.html#subroutine_distrib_slice_z">distrib_slice_z</A> ()

end module decomp_2d_custom
</PRE>
  module: decomp_2d_custom
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description: 
  <UL>
  <LI>  this module is based on 2Decomp library and ghost cell functionality to 
    the library
 </UL>
  </UL>

<HR><H2> Description of Variables </H2>
<A NAME="var_level"><H3>level</H3></A>
<PRE>integer, private :: level
</PRE>
<A NAME="var_neighbour"><H3>neighbour</H3></A>
<PRE>integer, private, save, dimension(2,6) :: neighbour
</PRE>
<A NAME="var_dims"><H3>dims</H3></A>
<PRE>integer, public, save, dimension(2) :: dims
</PRE>
<A NAME="var_coord"><H3>coord</H3></A>
<PRE>integer, public, save, dimension(2) :: coord
</PRE>
<A NAME="var_ranks_proc"><H3>ranks_proc</H3></A>
<PRE>integer, public, allocatable, dimension(:) :: ranks_proc
</PRE>
<A NAME="var_decomp_2d_layer_x"><H3>DECOMP_2D_LAYER_X</H3></A>
<PRE>integer, public, save :: DECOMP_2D_LAYER_X
</PRE>
<A NAME="var_nrank_2d_layer_x"><H3>nrank_2d_layer_x</H3></A>
<PRE>integer, public, save :: nrank_2d_layer_x
</PRE>
<A NAME="var_ranks_2d_layer_x"><H3>ranks_2d_layer_x</H3></A>
<PRE>integer, public, allocatable, dimension(:,:) :: ranks_2d_layer_x
</PRE>
<A NAME="var_decomp_2d_vrtcl_x"><H3>DECOMP_2D_VRTCL_X</H3></A>
<PRE>integer, public, save :: DECOMP_2D_VRTCL_X
</PRE>
<A NAME="var_nrank_2d_vrtcl_x"><H3>nrank_2d_vrtcl_x</H3></A>
<PRE>integer, public, save :: nrank_2d_vrtcl_x
</PRE>
<A NAME="var_ranks_2d_vrtcl_x"><H3>ranks_2d_vrtcl_x</H3></A>
<PRE>integer, public, allocatable, dimension(:,:) :: ranks_2d_vrtcl_x
</PRE>
<A NAME="var_dcp_ph_sizes"><H3>dcp_ph_sizes</H3></A>
<PRE>integer, public, allocatable, dimension(:,:,:) :: dcp_ph_sizes
</PRE>
<A NAME="var_dcp_sp_sizes"><H3>dcp_sp_sizes</H3></A>
<PRE>integer, public, allocatable, dimension(:,:,:) :: dcp_sp_sizes
</PRE>

<HR><H2> Description of Interfaces </H2>
<A NAME="interface_alloc_x_ghost"><H3>alloc_x_ghost</H3></A>
<PRE>public interface alloc_x_ghost
    module procedure <A HREF="#subroutine_alloc_x_ghost_real">alloc_x_ghost_real</A>
    module procedure <A HREF="#subroutine_alloc_x_ghost_complex">alloc_x_ghost_complex</A>
end interface alloc_x_ghost
</PRE>
<A NAME="interface_alloc_y_ghost"><H3>alloc_y_ghost</H3></A>
<PRE>public interface alloc_y_ghost
    module procedure <A HREF="#subroutine_alloc_y_ghost_real">alloc_y_ghost_real</A>
    module procedure <A HREF="#subroutine_alloc_y_ghost_complex">alloc_y_ghost_complex</A>
end interface alloc_y_ghost
</PRE>
<A NAME="interface_update_ghost"><H3>update_ghost</H3></A>
<PRE>public interface update_ghost
    module procedure <A HREF="#subroutine_update_ghost_real">update_ghost_real</A>
    module procedure <A HREF="#subroutine_update_ghost_complex">update_ghost_complex</A>
end interface update_ghost
</PRE>

<HR><H2> Description of Subroutines and Functions </H2>
<A NAME="subroutine_decomp_info_ghost_init"><H3>decomp_info_ghost_init</H3></A>
<PRE>public subroutine decomp_info_ghost_init (nx, ny, nz, ghost_cell, p_on_z, decomp, decomp_ghost)
    integer, intent(in) :: nx
    integer, intent(in) :: ny
    integer, intent(in) :: nz
    integer, intent(in) :: ghost_cell
    integer, intent(in) :: p_on_z
    type (DECOMP_INFO), intent(OUT) :: decomp
    type (DECOMP_INFO), intent(OUT) :: decomp_ghost
    ! Calls: MPI_CART_COORDS, MPI_CART_GET, MPI_COMM_CREATE, MPI_COMM_GROUP, MPI_COMM_SIZE, MPI_GROUP_INCL, MPI_GROUP_RANK, decomp_info_init, init_neighbour
end subroutine decomp_info_ghost_init
</PRE>
 subroutine: initialise
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description:
 </UL>
<A NAME="subroutine_decomp_2d_partition_info"><H3>decomp_2d_partition_info</H3></A>
<PRE>public subroutine decomp_2d_partition_info (ph)
    type (DECOMP_INFO), intent(IN) :: ph
    ! Calls: MPI_ALLGATHER, decomp_2d_fft_2d_get_sp_info
end subroutine decomp_2d_partition_info
</PRE>
 subroutine: 
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 22/05/2015
<P>
 <LI>  description:
 </UL>
<A NAME="subroutine_alloc_x_ghost_real"><H3>alloc_x_ghost_real</H3></A>
<PRE>private subroutine alloc_x_ghost_real (var, decomp)
    real (kind=mytype), allocatable, dimension(:,:,:), intent(out) :: var
    type (DECOMP_INFO), intent(IN) :: decomp
    ! Calls: decomp_2d_abort
end subroutine alloc_x_ghost_real
</PRE>
 subroutine: allocate real varialbe on X-pencil with ghost cells
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description:
 </UL>
<A NAME="subroutine_alloc_y_ghost_real"><H3>alloc_y_ghost_real</H3></A>
<PRE>private subroutine alloc_y_ghost_real (var, decomp)
    real (kind=mytype), allocatable, dimension(:,:,:), intent(out) :: var
    type (DECOMP_INFO), intent(IN) :: decomp
    ! Calls: decomp_2d_abort
end subroutine alloc_y_ghost_real
</PRE>
 subroutine: allocate real varialbe on Y-pencil with ghost cells
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description:
 </UL>
<A NAME="subroutine_alloc_x_ghost_complex"><H3>alloc_x_ghost_complex</H3></A>
<PRE>private subroutine alloc_x_ghost_complex (var, decomp)
    complex (kind=mytype), allocatable, dimension(:,:,:), intent(out) :: var
    type (DECOMP_INFO), intent(IN) :: decomp
    ! Calls: decomp_2d_abort
end subroutine alloc_x_ghost_complex
</PRE>
 subroutine: allocate complex varialbe on X-pencil with ghost cells
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description:
 </UL>
<A NAME="subroutine_alloc_y_ghost_complex"><H3>alloc_y_ghost_complex</H3></A>
<PRE>private subroutine alloc_y_ghost_complex (var, decomp)
    complex (kind=mytype), allocatable, dimension(:,:,:), intent(out) :: var
    type (DECOMP_INFO), intent(IN) :: decomp
    ! Calls: decomp_2d_abort
end subroutine alloc_y_ghost_complex
</PRE>
 subroutine: allocate complex varialbe on Y-pencil with ghost cells
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description:
 </UL>
<A NAME="subroutine_update_ghost_real"><H3>update_ghost_real</H3></A>
<PRE>private subroutine update_ghost_real (inout, s1, s2, s3, dcp)
    real (kind=mytype), dimension(1:s1,1:s2,0:s3+1), intent(INOUT) :: inout
    integer, intent(IN) :: s1
    integer, intent(IN) :: s2
    integer, intent(IN) :: s3
    type (DECOMP_INFO), intent(IN) :: dcp
    ! Calls: MPI_IRECV, MPI_ISSEND, MPI_WAITALL, decomp_2d_abort
end subroutine update_ghost_real
</PRE>
 subroutine: update ghost cells
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description:
  <UL>
  <LI>  this function is inpiered form 2decomp
 </UL>
  </UL>
<A NAME="subroutine_update_ghost_complex"><H3>update_ghost_complex</H3></A>
<PRE>private subroutine update_ghost_complex (inout, s1, s2, s3, dcp)
    complex (kind=mytype), dimension(1:s1,1:s2,0:s3+1), intent(INOUT) :: inout
    integer, intent(IN) :: s1
    integer, intent(IN) :: s2
    integer, intent(IN) :: s3
    type (DECOMP_INFO), intent(IN) :: dcp
    ! Calls: MPI_IRECV, MPI_ISSEND, MPI_WAITALL, decomp_2d_abort
end subroutine update_ghost_complex
</PRE>
 subroutine: update ghost cells complex
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description:
  <UL>
  <LI>  this function is inpiered form 2decomp
 </UL>
  </UL>
<A NAME="subroutine_update_halo3"><H3>update_halo3</H3></A>
<PRE>public subroutine update_halo3 (in, out, level)
    real (kind=mytype), dimension(:,:,:), intent(IN) :: in
    real (kind=mytype), allocatable, dimension(:,:,:), intent(OUT) :: out
    integer, intent(IN) :: level
    ! Calls: MPI_IRECV, MPI_ISSEND, MPI_TYPE_COMMIT, MPI_TYPE_FREE, MPI_TYPE_VECTOR, MPI_WAITALL
end subroutine update_halo3
</PRE>
 subroutine: update halo for Lagrangian interpolation
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 08/03/2016
<P>
 <LI>  description:
  <UL>
  <LI>  this function is inpiered form 2decomp
 </UL>
  </UL>
<A NAME="subroutine_init_neighbour"><H3>init_neighbour</H3></A>
<PRE>private subroutine init_neighbour ()
    ! Calls: MPI_CART_SHIFT
end subroutine init_neighbour
</PRE>
 subroutine: initialise neighbour for ghost cell
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 09/06/2014
<P>
 <LI>  description:
  <UL>
  <LI>  this function is inpiered form 2decomp
 </UL>
  </UL>
<A NAME="subroutine_distrib_slice_z"><H3>distrib_slice_z</H3></A>
<PRE>private subroutine distrib_slice_z ()
end subroutine distrib_slice_z
</PRE>
 subroutine: distribute slice at given z
<P>
 <UL>
 <LI>  last modified: fabien margairaz ( fabien.margairaz@gmail.com ), 19/06/2014
<P>
 <LI>  description:
 </UL>
</HTML>
